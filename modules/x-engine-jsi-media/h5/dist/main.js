!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){(function(t){function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var r=window,i={default:void 0,call:function(e,t,n){if("function"==typeof t&&(n=t,t={}),t={data:void 0===t?null:t},"function"==typeof n){var o="dscb"+r.dscb++;r[o]=n,t._dscbstub=o}t=JSON.stringify(t);var i="";return r._dsbridge?i=_dsbridge.call(e,t):(r._dswk||-1!=r.navigator.userAgent.indexOf("_dsbridge"))&&r.prompt&&(i=r.prompt("_dsbridge="+e,t)),JSON.parse(i||"{}").data},unregister:function(e){delete r._dsaf._obs[e],delete r._dsaf[e],delete r._dsf._obs[e],delete r._dsf[e]},register:function(e,t,n){n=n?r._dsaf:r._dsf,r._dsInit||(r._dsInit=!0,setTimeout((function(){i.call("_dsb.dsinit")}),0)),"object"==typeof t?n._obs[e]=t:n[e]=t},registerAsyn:function(e,t){this.register(e,t,!0)},hasNativeMethod:function(e,t){return this.call("_dsb.hasNativeMethod",{name:e,type:t||"all"})},disableJavascriptDialogBlock:function(e){this.call("_dsb.disableJavascriptDialogBlock",{disable:!1!==e})}};r._dsf||(r._dsf={_obs:{}},r._dsaf={_obs:{}},r.dscb=0,r.dsBridge=i,r.close=function(){i.call("_dsb.closePage")},r._handleMessageFromNative=function(e){var t=JSON.parse(e.data),n={id:e.callbackId,complete:!0},o=this._dsaf[e.method],r=function(e,o){n.data=e.apply(o,t),i.call("_dsb.returnValue",n)},a=function(e,o){t.push((function(e,t){n.data=e,n.complete=!1!==t,i.call("_dsb.returnValue",n)})),e.apply(o,t)};if(d=this._dsf[e.method])r(d,this._dsf);else if(o)a(o,this._dsaf);else if(!(2>(d=e.method.split(".")).length)){e=d.pop();var d=d.join("."),s=(o=(o=this._dsf._obs)[d]||{})[e];s&&"function"==typeof s?r(s,o):(s=(o=(o=this._dsaf._obs)[d]||{})[e])&&"function"==typeof s&&a(s,o)}},i.register("_hasJavascriptMethod",(function(e,t){return 2>(t=e.split(".")).length?!(!_dsf[t]&&!_dsaf[t]):(e=t.pop(),t=t.join("."),(t=_dsf._obs[t]||_dsaf._obs[t])&&!!t[e])})));var a=new Set([]),d={},s="undefined"==typeof window?t:window;function c(e){return e&&"[object Function]"==={}.toString.call(e)}var l,u,f,g,_,m={patch:d,platform:(u=null==s||null==(l=s.navigator)?void 0:l.userAgent,f=/(?:Android)/.test(u),g=/(?:iPhone)/.test(u),{isPhone:g,isAndroid:f,isPc:!g&&!f}),hybrid:!0,isHybrid:function(){return s&&!0===s._dswk},bridge:i,use:function(e,t){if(a.has(e))throw e+',注册无效,模块已存在,xengine.use("'+e+'") 只允许调用一次;';a.add(e),console.log(e+",js 注册成功");var o=function(t,n){if(n.hasOwnProperty("__event__")){b++;var o=n.__event__;if(!c(o))throw"__event__ 必须为函数";n.__event__=e+"."+t+".__event__"+b,m.bridge.register(n.__event__,(function(e){return o(e)}))}return t.startsWith("sync")?m.bridge.call(e+"."+t,n):new Promise((function(o,r){console.warn("x-engine 0.1.0 将不再支持 promise,改用参数里的　__ret__做为异步返回值,以支持多次返回.或者直接调用函数同步返回"),m.bridge.call(e+"."+t,n,(function(e){if(o(e),n.__ret__)return n.__ret__(e)}))}))};return t.reduce((function(e,t,r){if(null===(i=t)||"function"!=typeof i&&"object"!=typeof i){if("[object String]"!==Object.prototype.toString.call(t))throw"仅支持 string 与 {name:xxx, default_args:{...}}";e[t]=function(e){return o(t,e)}}else e[t.name]=function(e){return o(t.name,n({},t.default_args,e))};var i;return e}),{})},api:function(e,t,n,o){if(n&&n.hasOwnProperty("__event__")){b++;var r=n.__event__;if(!c(r))throw"__event__ 必须为函数";n.__event__=ns+"."+t+".__event__"+b,m.bridge.register(n.__event__,(function(e){return r(e)}))}return i.call(e+"."+t,n,o)},broadcastOn:function(e){p.push(e),m.bridge.register("com.zkty.module.engine.broadcast",(function(e){for(var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e))){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(p);!(t=n()).done;)(0,t.value)(e.type,e.payload)}))},broadcastOff:function(){m.bridge.unregister("com.zkty.module.engine.broadcast")},assert:function(e,t){"document"in s&&(document.getElementById(e).style.backgroundColor=t?"green":"red")},onLifecycle:function(e){_=e}};m.bridge.register("com.zkty.jsi.engine.lifecycle.notify",(function(e){if(!_)throw"未注册 lifecycle";_(e.type,e.payload)}));var p=[],b=0;function h(e){if(this.platform.isPhone&&(e.addEventListener("focus",(function(){console.log("IOS 键盘弹起啦！")}),!1),e.addEventListener("blur",(function(){console.log("IOS 键盘收起啦！")}))),this.platform.isAndroid){var t,n,o=(null==(t=document)?void 0:t.documentElement.clientHeight)||(null==(n=document)?void 0:n.body.clientHeight);s.addEventListener("resize",(function(){var e,t,n=(null==(e=document)?void 0:e.documentElement.clientHeight)||(null==(t=document)?void 0:t.body.clientHeight);o<n?console.log("Android 键盘收起啦！"):console.log("Android 键盘弹起啦！"),o=n}),!1)}}Object.defineProperty(m,"bridge",{get:function(){return i},set:function(){throw"dsbridge不能被修改"}});var y=[];"document"in s&&(y=document.querySelectorAll(".input"));for(var v=0;v<y.length;v++)h(y[v]);d.disableDoubleTapScroll=function(e){var t,n;e=e||500,console.log("禁用双击滑动,两次点击冷却时间为"+e+" ms");var o=null==s||null==(t=s.navigator)||null==(n=t.userAgent)?void 0:n.toLowerCase(),r=null;"document"in s&&(o.indexOf("iphone")>=0||o.indexOf("ipad")>=0)&&document.body.addEventListener("touchend",(function(t){var n=(new Date).getTime(),o=n-(r=r||n+1);if(o<e&&o>0)return t.preventDefault(),!1;r=n}),!1)},e.exports=m}).call(this,n(1))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o);r.a.use("com.zkty.jsi.media",[{name:"test_placeholder",default_args:{},decorators:[]},{name:"test_placeholder",default_args:{},decorators:[]},{name:"test_placeholder",default_args:{},decorators:[]},{name:"test_previewImg",default_args:{},decorators:[]},{name:"test_saveImageToPhotoAlbum",default_args:{},decorators:[]},{name:"test_openImagePicker",default_args:{},decorators:[]},{name:"test_uploadImage",default_args:{},decorators:["async"]}]);window.test_placeholder=()=>{},document.getElementById("test_placeholder").click(),window.test_placeholder=()=>{},document.getElementById("test_placeholder").click(),window.test_placeholder=()=>{},document.getElementById("test_placeholder").click(),window.test_previewImg=()=>{r.a.api("com.zkty.jsi.media","previewImg",{index:0,imgList:["https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgss0.baidu.com%2F-Po3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F4034970a304e251fae75ad03a786c9177e3e534e.jpg&refer=http%3A%2F%2Fgss0.baidu.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1631950978&t=f96881f8b3efe3f4bffe9877ab942199","https://upload-images.jianshu.io/upload_images/5809200-7fe8c323e533f656.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"]})},document.getElementById("test_previewImg").click(),window.test_saveImageToPhotoAlbum=()=>{r.a.api("com.zkty.jsi.media","saveImageToPhotoAlbum",{type:"url",imageData:"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fcdn.duitang.com%2Fuploads%2Fitem%2F201410%2F20%2F20141020162058_UrMNe.jpeg&refer=http%3A%2F%2Fcdn.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1611307946&t=175b540644bac34ec738e48ff42f8034"},e=>{document.getElementById("debug_text").innerText=JSON.stringify(e)})},document.getElementById("test_saveImageToPhotoAlbum").click(),window.test_openImagePicker=()=>{r.a.api("com.zkty.jsi.media","openImagePicker",{allowsEditing:!0,savePhotosAlbum:!1,cameraFlashMode:-1,cameraDevice:"back",photoCount:5,args:{bytes:"100"},isbase64:!0},e=>{document.getElementById("debug_text").innerText=JSON.stringify(e);let t=JSON.parse(e);for(let e of t.data){const t=document.createElement("img");t.src="data:"+e.type+";base64,  "+e.thumbnail,t.style.cssText="width:100px; height:100px; margin-right:10px; border-radius:10px;",document.body.appendChild(t)}})},document.getElementById("test_openImagePicker").click(),window.test_uploadImage=()=>{r.a.api("com.zkty.jsi.media","uploadImage",{url:"https://api-uat.lohashow.com/gm-nxcloud-resource/api/nxcloud/res/upload",ids:["xxxx","xxxxx","xxxx","xxxx"],header:{}},e=>{document.getElementById("debug_text").innerText=JSON.stringify(e)})},document.getElementById("test_uploadImage").click()}]);