(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17983d67"],{"0ef5":function(t,e,a){"use strict";a("6763")},"3f3e":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"prizeRecord"},[a("listPagination",{ref:"listPagination",attrs:{"data-list":t.records,formatAjaxData:t.init,isRefresh:t.isRefresh,slotsShow:["finished","error"]},on:{"update:dataList":function(e){t.records=e},"update:data-list":function(e){t.records=e},"update:isRefresh":function(e){t.isRefresh=e},"update:is-refresh":function(e){t.isRefresh=e}},scopedSlots:t._u([{key:"finished",fn:function(){return[a("div",{staticClass:"reminder"},[t.records.length?a("div",[t._v("没有更多了")]):a("div",{staticClass:"error-body"},[a("div",{staticClass:"error-text"},[t._v("暂无中奖纪录")])])])]},proxy:!0},{key:"error",fn:function(){return[a("div",[t._v("请求失败，点击重新加载")])]},proxy:!0}])},[a("div",{staticClass:"prizeRecord-cont"},t._l(t.records,(function(e,o){return a("div",{key:o,staticClass:"prizeRecord-box"},[a("p",{staticClass:"prizeRecord-box-time"},[a("i",{staticClass:"prizeRecord-box-time-icon"}),t._v("中奖时间："+t._s(e.createTime))]),a("Coupons",{attrs:{type:e.type,couponUrl:e.couponUrl,cardNo:e.activityAwardId,usedTip:e.usedTip,money:e.money,condition:e.condition,time:e.date,status:e.status,handleUsed:t.handleUsed,isOverdue:e.isOverdue,awardTypeCode:e.awardTypeCode,title:e.title,activityAwardName:e.activityAwardName}})],1)})),0)])],1)},s=[],i=a("2909"),n=a("5530"),r=(a("d3b7"),a("d81d"),a("a2ab")),c=a("365c"),d=a("c1df"),u=a.n(d),p={name:"PrizeRecords",components:{Coupons:r["a"]},data:function(){return{records:[],isRefresh:!1}},mounted:function(){document.body.style.backgroundColor="#f9f9f9"},methods:{init:function(t){var e=this,a={activityId:this.$route.query.activityId,selectRange:1,pageNumber:t.page,pageSize:10};return new Promise((function(o,s){1===t.page&&(e.records=[]),c["a"].checkActivityDistribute(a).then((function(t){var a,s=t.data.records?t.data.records.map((function(t){return Object(n["a"])(Object(n["a"])({},t),{},{cardNo:t.couponsCode,type:t.couponsSource,couponUrl:t.couponsImageUrl,money:"LAPSE"===t.couponsTypeCode||"FULL_REDUCTION"===t.couponsTypeCode?"￥"+t.couponsMoney:10*t.deductionRate+"折",condition:"LAPSE"===t.treatmentMethod?"无门槛":"满".concat(t.fullDecrementConditionAmount,"元可用"),usedTip:t.couponsDesc,date:"截止日期："+t.expirationTime,isOverdue:u()(t.expirationTime).valueOf()-u()().valueOf()<0?"已过期":"",awardTypeCode:t.awardTypeCode,activityAwardName:t.activityAwardName,status:1===t.couponsOffStatus||u()(t.expirationTime).valueOf()-u()().valueOf()<0?"notUsed":"used"})})):[];(a=e.records).push.apply(a,Object(i["a"])(s));var r={pageCount:t.data.pages};o(r)})).catch((function(t){s(t)}))}))},renderCouponDate:function(t,e){var a=u.a.duration(u()(e).valueOf()-u()().valueOf()).days();this.duration=a;var o={maturityDay:"",isOverdue:a<=2&&a>0?"快过期":a<0?"已过期":""};switch(a){case 2:o.maturityDay="后天到期";break;case 1:o.maturityDay="明天到期";break;case 0:o.maturityDay="今天到期";break;default:o.maturityDay="截止日期："+u()(e).format("YYYY.MM.DD");break}return o},handleUsed:function(t){this.$router.push({path:"/couponGoods",query:{cardNo:t}})}}},l=p,f=(a("0ef5"),a("2877")),y=Object(f["a"])(l,o,s,!1,null,"821e5c86",null);e["default"]=y.exports},4945:function(t,e,a){"use strict";a("85d8")},6763:function(t,e,a){},"85d8":function(t,e,a){},a2ab:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return"01"===t.awardTypeCode?a("div",{class:["coupons","notUsed"===t.status?"notUsed":"SHOP"===t.type?"shop-bg":"platform-bg"]},[t.isOverdue||t.notStart?a("i",{staticClass:"coupons-overdue"},[t._v(t._s(t.notStart?t.notStart:t.isOverdue))]):t._e(),a("div",{staticClass:"coupons-info"},[a("div",{staticClass:"coupons-info-left"},[a("img",{attrs:{src:t.couponUrl,alt:""}}),a("p",{class:["coupons-info-left-type","SHOP"===t.type?"shop":"platform"]},[t._v(t._s("SHOP"===t.type?"店铺":"平台"))])]),a("div",{staticClass:"coupons-info-center"},[a("span",{staticClass:"coupons-info-center-money"},[t._v(t._s(t.money))]),a("span",{staticClass:"coupons-info-center-rule"},[t._v(t._s(t.condition))]),a("p",{staticStyle:{margin:"6px 0 2px 0"}},[t._v(t._s(t.title))]),a("p",{staticClass:"coupons-info-center-date"},[t._v(t._s(t.time))])]),"notUsed"!==t.status?a("div",{staticClass:"coupons-info-right",on:{click:function(e){return t.handleUsed(t.cardNo)}}},[t._v(" "+t._s(t.notStart?"去看看":"去使用")+" ")]):t._e()]),a("div",{class:["coupons-tip","notUsed"===t.status?"notUsed-tip":"SHOP"===t.type?"shop-tip":"platform-tip"]},[t.tipShow?a("p",[a("span",[t._v("券编号：")]),a("span",[t._v(t._s(t.cardNo))])]):t._e(),t.tipShow?a("p",{staticStyle:{whiteSpace:"pre-line"}},[t._v(t._s(t.usedTip))]):t._e(),a("div",{staticClass:"coupons-tip-icon",on:{click:function(e){t.tipShow=!t.tipShow}}},[a("van-icon",{attrs:{name:t.tipShow?"arrow-up":"arrow-down"}})],1)])]):a("div",{staticClass:"coupons-ths"},[a("div",{staticClass:"coupons-ths-icon"},[a("van-icon",{attrs:{name:"smile-o"}})],1),a("p",{staticClass:"coupons-ths-text"},[t._v(t._s(t.activityAwardName))])])},s=[],i={props:{activityAwardName:{type:String},notStart:{type:String,default:""},title:{type:String,default:""},awardTypeCode:{type:String,default:"01"},couponUrl:{type:String},money:{type:String,default:""},type:{type:String,default:"SHOP"},cardNo:{type:String},usedTip:{type:String},condition:{type:String},time:{type:String},status:{type:String},handleUsed:{type:Function},isOverdue:{type:String}},data:function(){return{tipShow:!1}}},n=i,r=(a("4945"),a("2877")),c=Object(r["a"])(n,o,s,!1,null,"86d1be7e",null);e["a"]=c.exports}}]);