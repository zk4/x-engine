(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f46d59a"],{"2d35":function(t,e,i){"use strict";i("3582")},3582:function(t,e,i){},5282:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[t.isTab||t.isMiniprogram?t._e():i("gm-header",{attrs:{hideItem:["center"],slotsShow:["left","right"],backgroundColor:"#1C1D25"},scopedSlots:t._u([{key:"dynamicsLeft",fn:function(){return[i("div",{staticClass:"nav-left"},[i("van-icon",{attrs:{size:"20",name:"arrow-left",color:"#ffffff"}}),i("span",{staticClass:"nav-title"},[t._v("会员中心")])],1)]},proxy:!0}],null,!1,1329294766)}),t.isTab&&!t.isMiniprogram?i("gm-header",{attrs:{hideItem:["left","right"],slotsShow:["center"],backgroundColor:"#1C1D25"},scopedSlots:t._u([{key:"dynamicsCenter",fn:function(){return[i("div",{staticClass:"nav-title-middle",attrs:{slot:"dynamicsCenter"},slot:"dynamicsCenter"},[t._v("会员中心")])]},proxy:!0}],null,!1,4240919966)}):t._e(),t.cardLists.length?i("div",{class:t.isMiniprogram?"memberCenter-contents mini":"memberCenter-contents"},[i("div",{staticClass:"top-back"}),i("van-swipe",{attrs:{"initial-swipe":t.active,loop:!1,"show-indicators":!1},on:{change:t.swipeChange}},t._l(t.cardLists,(function(e,s){return i("van-swipe-item",{key:s,class:1===e.cardType?"style-o":2===e.cardType?"style-t":"style-h"},[i("div",{class:t.active!==s?"swipe-item-box active":"swipe-item-box",style:{backgroundImage:"url("+e.cardInfo.image+")"}},[e.defaultFlag?i("div",{staticClass:"swip-item-default"},[t._v("默认使用中")]):0===e.status?i("div",{staticClass:"swip-item-default"},[t._v("已激活")]):1===e.status?i("div",{staticClass:"swip-item-default"},[t._v("未激活")]):t._e(),i("div",{staticClass:"swip-item-name"},[t._v(t._s(e.cardInfo.name))]),3===e.cardType&&t.ifPayMember?i("div",{staticClass:"swip-item-service"},[i("span",[t._v(t._s(e.payEndTime.split(" ")[0])+"到期")]),i("div",{staticClass:"purchase-record",on:{click:t.turnBuyRecord}},[i("span",[t._v("购买记录")]),i("van-icon",{attrs:{name:"arrow"}})],1)]):t._e(),i("div",{staticClass:"swip-item-explain-card",on:{click:function(e){return t.turnCardDetail(s)}}},[t._v("会员说明")]),0===e.status?i("div",{staticClass:"swip-item-explain"},[t._v(t._s(e.memberCardId))]):t._e()]),i("div",{staticClass:"equity-box"},[i("div",{staticClass:"equity-text",domProps:{innerHTML:t._s(e.cardInfo.requityShow)}})])])})),1),t.showCode?i("div",{staticClass:"bottom-btn",style:{height:t.bottomHeight}},[t.ifPayMember?i("div",{staticClass:"equity-button",on:{click:t.turnBuyMember}},[t._v("家庭续费")]):t._e(),!t.ifPayMember&&t.showCode?i("div",{staticClass:"equity-button",on:{click:t.turnBuyMember}},[t._v("开通付费家庭会员卡 解锁更多权益")]):t._e()]):t._e()],1):t._e()],1)},a=[],r=(i("a9e3"),{name:"Index",data:function(){return{showCode:!1,unitId:this.$route.query.unitId,isTab:this.$route.query.from,isMiniprogram:this.$utils.isMiniprogram(),active:0,cardLists:[],defaultLocation:Number,ifPayMember:!1}},computed:{bottomHeight:function(){return this.$tabbarHeight+"px"}},created:function(){this.$utils.isMiniprogram()&&this.$route.query.userToken&&(this.$utils.storage.set("userToken",this.$route.query.userToken),this.$utils.storage.set("sessionToken",this.$route.query.sessionToken),this.$utils.storage.set("GMJUserInfo",this.$route.query.userInfo)),this.$route.query.mallCode&&(this.$utils.storage.set("homecityCode",this.$route.query.cityCode),this.$utils.storage.set("mallCode",this.$route.query.mallCode)),this.toast(),this.getMemberCode(),this.getMemberMessage(),this.visibilityEve()},methods:{toast:function(){this.$toast.loading({duration:0,message:"加载中..."})},turnCardDetail:function(t){this.$utils.isMiniprogram()?window.wx.miniProgram.navigateTo({url:"/pages/cardDetailWebview/cardDetailWebview?webviewUrl="+encodeURIComponent("/cardDetail?type="+this.cardLists[t].cardType)}):this.$router.push({path:"/cardDetail",query:{type:this.cardLists[t].cardType}})},turnBuyMember:function(){this.$utils.isMiniprogram()?window.wx.miniProgram.navigateTo({url:"/pages/buyMemberWebview/buyMemberWebview?webviewUrl="+encodeURIComponent("/buyMember?id="+this.cardLists[this.defaultLocation].memberCardId+"&unitId="+this.unitId)}):this.$router.push({path:"/buyMember",query:{id:this.cardLists[this.defaultLocation].memberCardId,unitId:this.unitId}})},turnBuyRecord:function(){this.$utils.isMiniprogram()?window.wx.miniProgram.navigateTo({url:"/pages/buyRecordWebview/buyRecordWebview?webviewUrl="+encodeURIComponent("/buyRecord?id="+this.cardLists[this.defaultLocation].memberCardId)}):this.$router.push({path:"/buyRecord",query:{id:this.cardLists[this.defaultLocation].memberCardId}})},visibilityEve:function(){var t=this,e=this;e.$utils.visibilityEve((function(){"/memberCenter"===e.$route.path&&(t.toast(),t.getMemberMessage())}))},swipeChange:function(t){this.active=t},getMemberCode:function(){var t=this,e={code:"pay_card_lock"};this.$api.getMemberCode(e).then((function(e){"0"===e.data.value?t.showCode=!0:t.showCode=!1}))},getMemberMessage:function(){var t={userId:this.$utils.getUserId()},e=this;e.$api.getMemberMessage(t).then((function(t){if(0===t.code&&t.data){for(var i in e.$toast.clear(),t.data)t.data[i].defaultFlag&&(e.defaultLocation=i,e.active=Number(i)),3===t.data[i].cardType&&t.data[i].defaultFlag&&(e.ifPayMember=!0);if(e.showCode)e.cardLists=t.data;else if(e.ifPayMember)e.cardLists=t.data;else for(var s=0;s<t.data.length;s++)3!==t.data[s].cardType&&e.cardLists.push(t.data[s])}}))}}}),o=r,n=(i("2d35"),i("2877")),d=Object(n["a"])(o,s,a,!1,null,"75a391c7",null);e["default"]=d.exports}}]);