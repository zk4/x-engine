(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77d98928"],{"087a":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"buy-member"}},[i("GmHeader",{attrs:{hideItem:["center","right"],leftText:"购买付费家庭会员","background-color":"#fff"}}),i("div",{staticClass:"member-card-box"},[i("p",{staticClass:"card-property"},[t._v("卡种选择")]),i("div",{staticClass:"card-list"},t._l(t.cardLists,(function(e,a){return i("div",{key:a,staticClass:"card-li",class:{"select-card":t.CardSelect==a},on:{click:function(e){return t.selectCard(a)}}},[i("div",{staticClass:"card-name"},[t._v(t._s(e.specName))]),i("div",{staticClass:"card-money"},[i("span",[t._v("￥")]),t._v(t._s(t.toDecimal2(e.salePrice)))]),i("div",{staticClass:"card-sale"},[t._v("￥"+t._s(t.toDecimal2(e.marketPrice)))])])})),0),i("div",[i("van-checkbox",{attrs:{"checked-color":"#FF5F3B","icon-size":"16px"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("如开通会员即表示您同意 "),i("span",{on:{click:function(e){return e.stopPropagation(),t.propertySkip.apply(null,arguments)}}},[t._v("付费会员协议")])])],1),i("div",{staticClass:"payment-button",on:{click:t.paySkip}},[t._v("支 付")])]),i("div",{staticClass:"member-rights",domProps:{innerHTML:t._s(t.cradInfo)}})],1)},r=[],n=(i("baa5"),i("d3b7"),i("25f0"),i("c975"),{name:"BuyMember",components:{},data:function(){return{CardSelect:0,cardLists:[],checked:!1,cradInfo:"",url:"",fileType:""}},created:function(){this.toast(),this.getMemberList(),this.getCardInfo()},mounted:function(){document.body.style.backgroundColor="#f9f9f9"},methods:{toast:function(){this.$toast.loading({duration:0,message:"加载中..."})},getMemberList:function(){var t=this;this.$api.getMemberCardList().then((function(e){0===e.code&&(t.$toast.clear(),t.cardLists=e.data)}))},getCardInfo:function(){var t=this,e={type:3};this.$api.getCardInfo(e).then((function(e){0===e.code&&(t.cradInfo=e.data.requityShow)}))},selectCard:function(t){this.CardSelect=t,this.select=!0},propertySkip:function(){if(this.$utils.isMiniprogram()){var t={spuCode:"SPU_3"},e=this;e.$api.getServiceAgreement(t).then((function(t){if(0===t.code){e.url=t.data.url;var i=t.data.originalName.lastIndexOf(".");e.fileType=t.data.originalName.substr(i+1),e.$engine.api("com.zkty.jsi.viewer","openFileReader",{fileUrl:e.url,fileType:e.fileType||"pdf",title:"付费会员协议"},(function(t){document.getElementById("debug_text").innerText=JSON.stringify(t)}))}}))}else this.$router.push({path:"/pdf"})},paySkip:function(){this.checked?this.$router.push({path:"/memberOrder",query:{cardNo:this.$route.query.id,shopCode:this.cardLists[this.CardSelect].shopCode,skuCode:this.cardLists[this.CardSelect].skuCode,unitId:this.$route.query.unitId}}):this.$toast("请先同意付费会员协议")},toDecimal2:function(t){if(!t)return"0.00";var e=t.toString(),i=e.indexOf(".");i<0&&(i=e.length,e+=".");while(e.length<=i+2)e+="0";if(e.length>i+3){var a=e.substring(0,i+3);return a}return e}}}),s=n,c=(i("b4d2"),i("2877")),o=Object(c["a"])(s,a,r,!1,null,null,null);e["default"]=o.exports},"25f0":function(t,e,i){"use strict";var a=i("6eeb"),r=i("825a"),n=i("d039"),s=i("ad6d"),c="toString",o=RegExp.prototype,d=o[c],l=n((function(){return"/a/b"!=d.call({source:"a",flags:"b"})})),u=d.name!=c;(l||u)&&a(RegExp.prototype,c,(function(){var t=r(this),e=String(t.source),i=t.flags,a=String(void 0===i&&t instanceof RegExp&&!("flags"in o)?s.call(t):i);return"/"+e+"/"+a}),{unsafe:!0})},b4d2:function(t,e,i){"use strict";i("d07d")},baa5:function(t,e,i){var a=i("23e7"),r=i("e58c");a({target:"Array",proto:!0,forced:r!==[].lastIndexOf},{lastIndexOf:r})},d07d:function(t,e,i){},e58c:function(t,e,i){"use strict";var a=i("fc6a"),r=i("a691"),n=i("50c4"),s=i("a640"),c=Math.min,o=[].lastIndexOf,d=!!o&&1/[1].lastIndexOf(1,-0)<0,l=s("lastIndexOf"),u=d||!l;t.exports=u?function(t){if(d)return o.apply(this,arguments)||0;var e=a(this),i=n(e.length),s=i-1;for(arguments.length>1&&(s=c(s,r(arguments[1]))),s<0&&(s=i+s);s>=0;s--)if(s in e&&e[s]===t)return s||0;return-1}:o}}]);