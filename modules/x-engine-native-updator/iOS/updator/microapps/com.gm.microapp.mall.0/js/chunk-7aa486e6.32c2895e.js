(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7aa486e6"],{"69c1":function(t,i,s){"use strict";s("db44")},7843:function(t,i,s){"use strict";s.r(i);var e=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"mypost"},[e("div",{attrs:{slot:"header"},slot:"header"},[e("GmHeader",{attrs:{hideItem:["center","right"],leftText:"我的帖子","background-color":"#fff"}})],1),e("div",{staticClass:"content"},[e("listPagination",{attrs:{"data-list":t.dataPoss,formatAjaxData:t.getmyPost,isRefresh:t.isRefresh,slotsShow:["finished","error"]},on:{"update:dataList":function(i){t.dataPoss=i},"update:data-list":function(i){t.dataPoss=i},"update:isRefresh":function(i){t.isRefresh=i},"update:is-refresh":function(i){t.isRefresh=i}},scopedSlots:t._u([{key:"finished",fn:function(){return[e("div",{staticClass:"reminder"},[t.dataPoss.length?e("div",[t._v("没有更多了")]):e("div",{staticClass:"error-body",staticStyle:{background:"#ffff"}},[e("div",[e("img",{staticClass:"img-login",attrs:{src:s("e3bb"),alt:""}})]),e("div",{staticClass:"error-text"},[t._v("暂无帖子")])])])]},proxy:!0},{key:"error",fn:function(){return[e("div",[t._v("请求失败，点击重新加载")])]},proxy:!0}])},[e("div",t._l(t.dataPoss,(function(i,a){return e("div",{key:a,staticClass:"content-box"},[e("div",{staticClass:"box-top",on:{click:function(s){return t.goDetails(i)}}},[e("img",{staticClass:"headimg",attrs:{src:i.memberPhotoUrl,alt:""}}),e("div",{staticClass:"box-title"},[e("p",{staticClass:"box-p1"},[e("span",{staticClass:"box_con"},[t._v(t._s(i.userNickname))])]),e("span",{staticClass:"box_span"},[e("img",{attrs:{src:i.meming,alt:""}})]),e("p",{staticClass:"box-p2"},[t._v(t._s(i.crtTime))])])]),e("div",{staticClass:"box-conent"},[e("div",[i.imgArr.length>1?e("van-grid",{attrs:{gutter:15,"column-num":3}},t._l(i.imgArr,(function(s,a){return e("van-grid-item",{key:a},[e("van-image",{attrs:{src:s,"error-icon":t.defaultAvatar,width:"1.9rem",height:"1.9rem",fit:"cover"},on:{click:function(s){return t.reviewImg(i.imgArr,a)}}})],1)})),1):t._e(),1==i.imgArr.length?e("van-image",{attrs:{width:"6.7rem",height:"3.3rem",radius:"10",src:i.imgArr[0],fit:"cover","error-icon":t.defaultAvatar},on:{click:function(s){return t.reviewImg(i.imgArr,0)}}}):t._e()],1)]),e("div",{staticClass:"box-foot"},[e("div",{staticClass:"foots-title"},[e("div",{staticClass:"foots_ioc"},[e("span",{staticClass:"foots_cs"},[t._v("#")])]),e("span",{on:{click:function(s){return t.getlist(i)}}},[t._v(t._s(i.topicName))])]),e("div",{staticClass:"foots-content",on:{click:function(s){return t.goDetails(i)}}},[t._v(" "+t._s(i.mainBody)+" ")])]),e("div",{staticClass:"foots-foot"},[e("div",{staticClass:"left"},[e("img",{staticStyle:{width:"15px",height:"15px","margin-right":"5px"},attrs:{src:s("deb5"),alt:""}}),e("span",{staticClass:"foots-tit"},[t._v(" "+t._s(i.mallName)+t._s("NEIGHBORHOODTOPIC"==i.topicType?i.resName:"")+" ")])]),e("div",{staticClass:"right"},[e("ul",{staticClass:"right_ul"},[e("li",[e("van-icon",{staticStyle:{"font-weight":"bold","vertical-align":"middle"},attrs:{name:i.likeColor?"like":"like-o",size:"18",color:i.likeColor?"red":"#000000"},on:{click:function(i){return i.stopPropagation(),t.like(a)}}}),e("van-badge",{staticClass:"badge",staticStyle:{"margin-right":"30px"},attrs:{content:i.likeNum,color:"#fff"}})],1),e("li",{on:{click:function(s){return t.goDetails(i)}}},[e("van-icon",{staticClass:"icon_font",staticStyle:{"font-weight":"bold","xvertical-align":"middle",float:"left"},attrs:{size:"18",name:"chat-o"}}),e("van-badge",{staticClass:"badge",attrs:{content:i.commentNum,max:"999",color:"#fff"}})],1)])])])])})),0)])],1)])},a=[],o=s("2909"),r=(s("d3b7"),s("d81d"),s("ac1f"),s("1276"),s("c975"),s("28a2")),A=s("ee87"),n={name:"MyPost",data:function(){return{likeColor:"",defaultAvatar:A,isRefresh:!1,pageSize:5,dataPoss:[],imgscss:!1,imgs:[],loginId:""}},created:function(){this.loginId=this.$utils.getUserId()},methods:{getmyPost:function(t){var i=this;return new Promise((function(s,e){var a=i;1===t.page&&(i.dataPoss=[]),a.$api.getMyPost({userId:a.loginId,pageNumber:t.page,pageSize:a.pageSize}).then((function(t){var r=t.data;if(r){var A,n=0;n=~~(r.total/a.pageSize),r.total%a.pageSize>0&&++n;var c={pageCount:n,list:[]};r.records&&(c.list=JSON.parse(JSON.stringify(r.records)),c.list.map((function(t){return t.imgArr=t.pictureUrl?t.pictureUrl.split(","):[],t.likeColor=0===t.likeFlag,t.meming=i.memimgVip(t.memberLevel),t.memberPhotoUrl&&-1!==t.memberPhotoUrl.indexOf("https")&&(t.memberPhotoUrl="http:"+t.memberPhotoUrl.split(":")[1]),t}))),(A=i.dataPoss).push.apply(A,Object(o["a"])(c.list)),s(c)}else e()})).catch((function(t){console.error(t),e(t)}))}))},memimgVip:function(t){var i={1:s("932a"),2:s("17d6"),3:s("9f66")};return i[t]},reviewImg:function(t,i){Object(r["a"])({images:t,startPosition:i,showIndex:!1,closeable:!0,closeIcon:"arrow-left",closeIconPosition:"top-left"})},goDetails:function(t){this.$router.push({path:"/ordinaryPost",query:{crtUserId:t.crtUserId,id:t.id}})},like:function(t){var i=this;this.saveLike(t).then((function(s){if(0===s.code){i.dataPoss[t].likeColor=!i.dataPoss[t].likeColor;var e=i.dataPoss[t].likeNum?i.dataPoss[t].likeNum:0;i.dataPoss[t].likeColor&&(i.dataPoss[t].likeNum=e+1),i.dataPoss[t].likeColor||(i.dataPoss[t].likeNum=e-1,i.dataPoss[t].likeNum<=0&&(i.dataPoss[t].likeNum=0))}}))},saveLike:function(t){var i=this;return new Promise((function(s,e){var a=i,o=i.dataPoss[t],r={postUserId:o.crtUserId,communityId:o.id,userId:a.$utils.getUserId(),type:"like",delFlag:o.likeColor?1:0};a.$api.saveLickTopic(r).then((function(t){0===t.code&&t.data.success?s(t):i.$toast.fail("点赞失败！")})).catch((function(t){console.error(t),e(t)}))}))},getlist:function(t){t.activityId?this.$router.push({path:"/activeTopics",query:{activityId:t.activityId,id:t.communityId}}):this.$router.push({path:"/topic",query:{id:t.communityId}})}}},c=n,l=(s("69c1"),s("2877")),d=Object(l["a"])(c,e,a,!1,null,"e3464090",null);i["default"]=d.exports},db44:function(t,i,s){},ee87:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMAAAADACAMAAABlApw1AAAAP1BMVEUAAAD4+Pj39/f29vb19fXw8PDx8fHy8vLz8/P09PT19fX29vb39/f4+Pj5+fn6+vr7+/v8/Pz9/f3+/v7///8zJ5QuAAAABXRSTlMAJD2/7XxuZKkAAALNSURBVHja7dtrcqswDAVgEcDGIq4h1v7Xen/caZs2IQW/iqbnrEBfxgcZZkJEXc9K03dERJeBnTWjuhjreLgQdQNPo9JMPHTU651/HCfuid2oOI6JrWaAZWKjGWCYeFQdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACax1zXGNer0QpwUUREJDqdgPf5UwRnAJiP+UWiUQi4yl2uCgHrPWBVCIj3gAgAjtDfK7H6x+jpFtl0nac0wTmuEl5ExOu9zPn/P6ZvdPyKAzJOwykA9rOPViVgTV9JpwCE+50U9AFm+ZJZG2CKXwFx0gUwN/mWm1EFWOQhiyaAlyfxegAsT8NaAN8L3KrIpQCPBX5dZMOF/r9WChBkM8/22TWKxPlEAC8v4rcW3nwagIuvAA8X0/e+lOhHEYB9Of/DxfSzLwUWXRHAKj9k3epLOAUgyI8Jpb6i1ADMsiPzxsLIrkE+YIp7AB+Dfl8YuTXIBmxvsOeDhj1roiVgkZ1ZHgtQoga5AC+74zcWRt73i0wAy4HwxnnLqkEeYF+BP4u8vDpdvwDYW+APwf7bUhtAkELJqEEOwEuxpH/GywC4WA6Q/hkvHWBLzi/y1hywStlwY0AoPH9qDVIBsxTP2hIwxfKAtBqkAY5usJ2ZmwGWKvMnvd0kAbxUymqaAFiqJbQAVClw8tvNcUClAqfW4DggSNUcfbs5DPBSOaEuwMXagIM1OAiw9ec/+HZzELBKgxyqwTHALE3yVg0Q2gBuAPzyEfL1SrwoL/E4+lvtB+ntzdS9SpwsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAGM3zGya2mgGWiZ1mgGPqedI7/8Q9dYNewcRDR3QZ2FmFTTbW8XAhIup6Vpq+I/oHlUqlUPej+ikAAAAASUVORK5CYII="}}]);