{"version":3,"file":"bridge.common.modern.js","sources":["../src/dsbridge.js","../src/index.js"],"sourcesContent":["var global_this =  window;\nvar bridge = {\n    default:\n        this,\n\n    // js调用Native方法\n    call: function (functionName, args, callback) {\n        // 如果是无参数的方法  function(functionName,callback)\n        \"function\" == typeof args && (callback = args, args = {});\n\n        //参数对象 {data: args/null}\n        // void 0 解释 https://stackoverflow.com/questions/7452341/what-does-void-0-mean\n        args = { data: void 0 === args ? null : args };\n\n        // 如果是异步并且要接收返回值的\n        if (\"function\" == typeof callback) {\n            // callback标识,计数器\n            var tag = \"dscb\" + global_this.dscb++;\n            // 保存回调   global_this[dscbX] = callback Function\n            global_this[tag] = callback;\n            // args = {data: args/null,_dscbstud:tag}\n            args._dscbstub = tag\n        }\n        // 将参数转成Json字符串\n        args = JSON.stringify(args);\n\n        var ret = \"\";\n        // 这里不会走到,目前从源里没有看到有什么地方注入了_dsbridge\n        if (global_this._dsbridge) {\n            ret = _dsbridge.call(functionName, args);\n        }\n\n        // 客户端会走到这里, webView初始化的时候会给global_this注入_dswk=true\n        else if (global_this._dswk || -1 != global_this.navigator.userAgent.indexOf(\"_dsbridge\")) {\n            if (global_this.prompt)\n                ret = global_this.prompt(\"_dsbridge=\" + functionName, args);\n        }\n        return JSON.parse(ret || \"{}\").data\n    },\n    unregister: function (jsFunctionName) {\n        delete global_this._dsaf._obs[jsFunctionName]\n        delete global_this._dsaf[jsFunctionName]\n        delete global_this._dsf._obs[jsFunctionName]\n        delete global_this._dsf[jsFunctionName]\n    },\n    // js注册供Native调用的方法,如果传入callback,则为异步方法\n    register: function (jsFunctionName, receiveParamsFunction, callback) {\n\n        // 判断是同步还是异步  callback = { _obs:{} };\n        callback = callback ? global_this._dsaf : global_this._dsf;\n\n        //只执行一次,为了调用一次native的dsinit方法\n        global_this._dsInit || (global_this._dsInit = !0, setTimeout(function () {\n            bridge.call(\"_dsb.dsinit\")\n        }, 0));\n\n        //将call保存在对应的数据结构中, callback = { jsFunctionName : receiveParamsFunction: , _obs:{} };\n        \"object\" == typeof receiveParamsFunction ? callback._obs[jsFunctionName] = receiveParamsFunction : callback[jsFunctionName] = receiveParamsFunction\n    },\n\n    // js注册供Native调用的异步方法\n    registerAsyn: function (b, a) {\n        this.register(b, a, !0)\n    },\n\n    // 是否有Native方法\n    hasNativeMethod: function (b, a) {\n        return this.call(\"_dsb.hasNativeMethod\", {\n            name: b,\n            type: a || \"all\"\n        })\n    },\n\n    // 禁用Dialog\n    disableJavascriptDialogBlock: function (b) {\n        this.call(\"_dsb.disableJavascriptDialogBlock\", {\n            disable: !1 !== b\n        })\n    }\n};\n\n\n// https://www.cnblogs.com/binbin001/p/11393040.html\n// 立即执行一段代码 ,函数表达示后面跟 `()` 可以立即执行\n// function(){}()\n(function () {\n\n    // js对象动态添加属性\n    // obj[property] = xxx. not obj.property = xxx\n\n    // 1. 如果global_this已经添加了 `_dsf` 属性直接返回\n    if (global_this._dsf) return;\n\n    // 2. global_this添加一个 `_dsf` 对象属性, 保存同步方法\n    global_this[\"_dsf\"] = { _obs: {} };\n    // 3. global_this添加一个 `_dsaf` 对象属性, 保存异步方法\n    global_this[\"_dsaf\"] = { _obs: {} };\n    // 4. global_this添加一个callback计数唯一标识\n    global_this[\"dscb\"] = 0;\n    // 5. global_this添加一个 bridge属性\n    global_this[\"dsBridge\"] = bridge;\n    //6. global_this添加一个界面关闭方法\n    global_this[\"close\"] = function () {\n        bridge.call(\"_dsb.closePage\");\n    };\n    // 7. global_this添加统一处理Native方法的函数\n    //a = { \"callbackId\":id, \"method\":name, \"data\":[x,y,z,..]}\n    global_this[\"_handleMessageFromNative\"] = function (a) {\n        // 调用方法的参数数组\n        var e = JSON.parse(a.data),\n\n            // 临时对象\n            b = {\n                id: a.callbackId,\n                complete: !0\n            },\n            // 同步方法\n            c = this._dsf[a.method],\n            // 异步方法\n            d = this._dsaf[a.method],\n\n\n            h = function (a, c) {\n                b.data = a.apply(c, e);\n                bridge.call(\"_dsb.returnValue\", b);\n            },\n\n            k = function (a, c) {\n                e.push(function (a, c) {\n                    b.data = a;\n                    b.complete = !1 !== c;\n                    bridge.call(\"_dsb.returnValue\", b)\n                });\n                a.apply(c, e);\n            };\n\n        if (c) h(c, this._dsf);\n        else if (d) k(d, this._dsaf);\n        else if (c = a.method.split(\".\"), !(2 > c.length)) {\n            a = c.pop();\n            var c = c.join(\".\"),\n                d = this._dsf._obs,\n                d = d[c] ||\n                    {},\n                f = d[a];\n            f && \"function\" == typeof f ? h(f, d) : (d = this._dsaf._obs, d = d[c] ||\n                {}, (f = d[a]) && \"function\" == typeof f && k(f, d))\n        }\n    };\n\n    bridge.register(\"_hasJavascriptMethod\", function (a, b) {\n        b = a.split(\".\");\n        if (2 > b.length) return !(!_dsf[b] && !_dsaf[b]);\n        a = b.pop();\n        b = b.join(\".\");\n        return (b = _dsf._obs[b] || _dsaf._obs[b]) && !!b[a]\n    });\n\n})();\n\nexport default bridge;\n\n","import dsbridge from \"./dsbridge\";\nconst module_names = new Set([]);\nconst patch = {};\nvar global_this = typeof  window == 'undefined' ? global : window;\nfunction isFunction (functionToCheck) {\n  return (\n    functionToCheck && {}.toString.call(functionToCheck) === \"[object Function]\"\n  );\n}\n\nfunction isObject (val) {\n  if (val === null) {\n    return false;\n  }\n  return typeof val === \"function\" || typeof val === \"object\";\n}\n\nfunction isString (x) {\n  return Object.prototype.toString.call(x) === \"[object String]\";\n}\n\nfunction isHybrid () {\n  return global_this && global_this._dswk === true;\n}\nlet xengine = {\n  patch: patch,\n  platform: platform(),\n  hybrid: true,\n  isHybrid: isHybrid,\n  bridge: dsbridge,\n  use: use,\n  api: api,\n  broadcastOn: broadcastOn,\n  broadcastOff: broadcastOff,\n  assert: xassert,\n  onLifecycle: onLifecycle,\n};\n\n// lifecycle\nlet __onLifeCycleCB;\nfunction onLifecycle (cb) {\n  __onLifeCycleCB = cb;\n}\nxengine.bridge.register(\"com.zkty.jsi.engine.lifecycle.notify\", (res) => {\n  if (__onLifeCycleCB) __onLifeCycleCB(res.type, res.payload);\n  else throw \"未注册 lifecycle\";\n});\n\nfunction xassert (targetID, expression) {\n  if ('document' in global_this) {\n    if (expression) {\n      document.getElementById(targetID).style.backgroundColor = \"green\";\n    } else {\n      document.getElementById(targetID).style.backgroundColor = \"red\";\n    }\n  }\n}\n\nfunction api (jsimoduleId, funcname, args, cb) {\n  if (args) {\n    if (args.hasOwnProperty(\"__event__\")) {\n      only_idx++;\n      let eventcb = args[\"__event__\"];\n      if (!isFunction(eventcb)) throw \"__event__ 必须为函数\";\n      args[\"__event__\"] = ns + \".\" + funcname + \".__event__\" + only_idx;\n      xengine.bridge.register(args[\"__event__\"], (res) => {\n        // 处理__event__ 回调\n        return eventcb(res);\n      });\n    }\n  }\n  // 处理 sync, async 方法\n  // aysnc 会通过 cb 传递\n  // sync 通过 return 返回\n  return dsbridge.call(jsimoduleId + \".\" + funcname, args, cb);\n}\n\nfunction broadcastOff () {\n  xengine.bridge.unregister(\"com.zkty.module.engine.broadcast\");\n}\nlet eventCBStack = [];\nfunction broadcastOn (eventcb) {\n  eventCBStack.push(eventcb);\n  xengine.bridge.register(\"com.zkty.module.engine.broadcast\", (res) => {\n    for (const cb of eventCBStack) {\n      cb(res.type, res.payload);\n    }\n  });\n}\nlet only_idx = 0;\n\nfunction use (ns, funcs) {\n  if (module_names.has(ns)) {\n    throw ns + ',注册无效,模块已存在,xengine.use(\"' + ns + '\") 只允许调用一次;';\n  }\n  module_names.add(ns);\n  console.log(ns + \",js 注册成功\");\n\n  let _call = function (funcname, args) {\n    if (args.hasOwnProperty(\"__event__\")) {\n      only_idx++;\n      let eventcb = args[\"__event__\"];\n      if (!isFunction(eventcb)) throw \"__event__ 必须为函数\";\n      args[\"__event__\"] = ns + \".\" + funcname + \".__event__\" + only_idx;\n      xengine.bridge.register(args[\"__event__\"], (res) => {\n        return eventcb(res);\n      });\n    }\n\n    if (funcname.startsWith(\"sync\")) {\n      return xengine.bridge.call(ns + \".\" + funcname, args);\n    } else {\n      let p = new Promise((resolve, reject) => {\n        const warning_msg =\n          \"x-engine 0.1.0 将不再支持 promise,改用参数里的　__ret__做为异步返回值,以支持多次返回.或者直接调用函数同步返回\";\n        console.warn(warning_msg);\n        xengine.bridge.call(ns + \".\" + funcname, args, function (res) {\n          // only resolve once\n          resolve(res);\n          if (args[\"__ret__\"]) {\n            return args[\"__ret__\"](res);\n          }\n        });\n      });\n      return p;\n    }\n  };\n\n  return funcs.reduce((acc, cur, i) => {\n    if (isObject(cur)) {\n      acc[cur.name] = (args) =>\n        _call(cur.name, {\n          ...cur.default_args,\n          ...args,\n        });\n    } else if (isString(cur)) {\n      acc[cur] = (args) => _call(cur, args);\n    } else {\n      throw \"仅支持 string 与 {name:xxx, default_args:{...}}\";\n    }\n    return acc;\n  }, {});\n}\n\nObject.defineProperty(xengine, \"bridge\", {\n  get () {\n    return dsbridge;\n  },\n  set: function () {\n    throw \"dsbridge不能被修改\";\n  },\n});\n\nfunction platform () {\n  var ua = global_this?.navigator?.userAgent,\n    isAndroid = /(?:Android)/.test(ua),\n    isPhone = /(?:iPhone)/.test(ua),\n    isPc = !isPhone && !isAndroid;\n  return {\n    isPhone: isPhone,\n    isAndroid: isAndroid,\n    isPc: isPc,\n  };\n}\n\n// 监听输入框的软键盘弹起和收起事件\nfunction listenKeybord ($input) {\n  if (this.platform.isPhone) {\n    // IOS 键盘弹起：IOS 和 Android 输入框获取焦点键盘弹起\n    $input.addEventListener(\n      \"focus\",\n      function () {\n        console.log(\"IOS 键盘弹起啦！\");\n        // IOS 键盘弹起后操作\n      },\n      false\n    );\n\n    // IOS 键盘收起：IOS 点击输入框以外区域或点击收起按钮，输入框都会失去焦点，键盘会收起，\n    $input.addEventListener(\"blur\", () => {\n      console.log(\"IOS 键盘收起啦！\");\n      // IOS 键盘收起后操作\n    });\n  }\n\n  // Andriod 键盘收起：Andriod 键盘弹起或收起页面高度会发生变化，以此为依据获知键盘收起\n  if (this.platform.isAndroid) {\n    var originHeight =\n      document?.documentElement.clientHeight || document?.body.clientHeight;\n\n    global_this.addEventListener(\n      \"resize\",\n      function () {\n        var resizeHeight =\n          document?.documentElement.clientHeight || document?.body.clientHeight;\n        if (originHeight < resizeHeight) {\n          console.log(\"Android 键盘收起啦！\");\n          // Android 键盘收起后操作\n        } else {\n          console.log(\"Android 键盘弹起啦！\");\n          // Android 键盘弹起后操作\n        }\n\n        originHeight = resizeHeight;\n      },\n      false\n    );\n  }\n}\n\nvar $inputs = [];\nif ('document' in global_this) {\n  $inputs = document.querySelectorAll(\".input\")\n}\n\nfor (var i = 0; i < $inputs.length; i++) {\n  listenKeybord($inputs[i]);\n}\n\npatch.disableDoubleTapScroll = function (ms) {\n  ms = ms || 500;\n  console.log(\"禁用双击滑动,两次点击冷却时间为\" + ms + \" ms\");\n  //禁止双击时, webview 自动上移\n  //不是个好方案, 会导致快速点击按钮失效\n  var agent = global_this?.navigator?.userAgent?.toLowerCase();\n  var iLastTouch = null;\n  if ('document' in global_this) {\n    if (agent.indexOf(\"iphone\") >= 0 || agent.indexOf(\"ipad\") >= 0) {\n      document.body.addEventListener(\n        \"touchend\",\n        function (event) {\n          var a = new Date().getTime();\n          iLastTouch = iLastTouch || a + 1;\n          var c = a - iLastTouch;\n          if (c < ms && c > 0) {\n            event.preventDefault();\n            return false;\n          }\n          iLastTouch = a;\n        },\n        false\n      );\n    }\n  }\n};\nexport default xengine\n\n"],"names":["global_this","window","bridge","default","this","call","functionName","args","callback","data","tag","dscb","_dscbstub","JSON","stringify","ret","_dsbridge","_dswk","navigator","userAgent","indexOf","prompt","parse","unregister","jsFunctionName","_dsaf","_obs","_dsf","register","receiveParamsFunction","_dsInit","setTimeout","registerAsyn","b","a","hasNativeMethod","name","type","disableJavascriptDialogBlock","disable","e","id","callbackId","complete","d","method","h","c","apply","k","push","split","length","pop","join","f","module_names","Set","patch","global","isFunction","functionToCheck","toString","xengine","platform","ua","_global_this$navigato","isAndroid","test","isPhone","isPc","hybrid","isHybrid","dsbridge","use","ns","funcs","has","add","console","log","_call","funcname","hasOwnProperty","only_idx","eventcb","res","startsWith","Promise","resolve","reject","warn","reduce","acc","cur","i","val","Object","prototype","default_args","api","jsimoduleId","cb","broadcastOn","eventCBStack","payload","broadcastOff","assert","targetID","expression","document","getElementById","style","backgroundColor","onLifecycle","__onLifeCycleCB","listenKeybord","$input","addEventListener","originHeight","documentElement","clientHeight","_document2","body","resizeHeight","_document4","defineProperty","get","set","$inputs","querySelectorAll","disableDoubleTapScroll","ms","agent","_global_this$navigato2","_global_this$navigato3","toLowerCase","iLastTouch","event","Date","getTime","preventDefault"],"mappings":"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"}